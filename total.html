<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
	<title>成本计算</title>
	<!-- head 中 -->
	<link rel="stylesheet" href="https://cdn.bootcss.com/weui/1.1.3/style/weui.min.css">
	<link rel="stylesheet" href="https://cdn.bootcss.com/jquery-weui/1.2.1/css/jquery-weui.min.css">

	<!-- body 最后 -->
	<script src="https://cdn.bootcss.com/jquery/1.7.2/jquery.min.js"></script>
	<script src="https://cdn.bootcss.com/jquery-weui/1.2.1/js/jquery-weui.min.js"></script>
</head>
<body>
   <div class="demos-header"><h2 class="demos-title" style="text-align: center;margin: 20px 0;color:skyblue">小可爱专用计算器</h2></div>
	<div class="weui-cells weui-cells_form" style="margin:20px 10px">
		<div class="weui-cell">
			<div class="weui-cell__hd"><label class="weui-label">物品名称：</label></div>
			<div class="weui-cell__bd">
			  <input class="weui-input" type="text" placeholder="" id="name">
			</div>
		</div>
		<div class="weui-cell">
			<div class="weui-cell__hd"><label class="weui-label">物品价格：</label></div>
			<div class="weui-cell__bd">
			  <input class="weui-input" type="number" pattern="[0-9]*" placeholder="" id="price">
			</div>
			<div class="weui-cell__hd" style="text-align: right;"><label> 元</label></div>
		</div>
		<div class="weui-cell">
			<div class="weui-cell__hd"><label class="weui-label">物品重量：</label></div>
			<div class="weui-cell__bd">
			  <input class="weui-input" type="number" pattern="[0-9]*" placeholder="" id="weight">
			</div>
			<div class="weui-cell__hd" style="text-align: right;"><label> 克</label></div>
		</div>
		<div class="weui-cell">
			<div class="weui-cell__hd"><label class="weui-label" style="width:120px">配方所需重量：</label></div>
			<div class="weui-cell__bd">
			  <input class="weui-input" type="number" pattern="[0-9]*" placeholder="" id="needWeight">
			</div>
            <div class="weui-cell__hd" style="text-align: right;"><label> 克</label></div>
		</div>
		<div style="margin:10px"></div>
		<a href="javascript:;" class="weui-btn weui-btn_primary" onclick="total()">计算成本</a>
		<a href="javascript:;" class="weui-btn weui-btn_warn" onclick="clearList()">清空列表</a>
	</div>
    <div class="weui-cells" id="ResList">
	</div>
    <div class="weui-cells" style="background:#f3f3f3">
	  <div class="weui-cell">
	    <div class="weui-cell__bd">
	      <p>总计成本：</p>
	    </div>
	    <div class="weui-cell__ft"><span id="totalPrice"></span> 元</div>
	  </div>
	</div>
</body>
</html>
<script type="text/javascript">
  var totalPrice=0;
  function total(){
  	var name=$("#name").val()
  	var price=$("#price").val()
  	var weight=$("#weight").val()
  	var needWeight=$("#needWeight").val()
  	var total=((price/weight)*needWeight).toFixed(2)
    clearText();
    var html=`<div class="weui-cell">
			    <div class="weui-cell__bd">
			      <p>${name}</p>
			    </div>
			    <div class="weui-cell__ft chenben">成本价: ${total} 元</div>
			  </div>`
    $("#ResList").append(html)
    totalPrice= Number(totalPrice)+ Number(total);
    $("#totalPrice").text(totalPrice.toFixed(2))
  }

  //重置表单
  function clearText(){
    $("#name").val("")
  	$("#price").val("")
  	$("#weight").val("")
  	$("#needWeight").val("")
  }

 //清空列表
 function clearList(){
 	totalPrice=0;
    $("#totalPrice").text("")
    $("#ResList").html("")
 }
</script>